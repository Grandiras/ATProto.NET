@page "/login"

<PageTitle>Sign In â€” ATProto.NET</PageTitle>

<h1>Sign In</h1>

<p class="text-muted mb-4">Sign in with your AT Protocol account using OAuth.</p>

<div class="card shadow-sm" style="max-width: 440px;">
    <div class="card-body p-4">
        <LoginForm
            OnLoginSuccess="HandleLogin"
            OnLoginError="HandleError"
            OAuthRedirectUri="http://127.0.0.1:5000/oauth/callback"
            PreferOAuth="true"
            ShowPasswordOption="false" />
    </div>
</div>

@if (_error is not null)
{
    <div class="alert alert-danger mt-3" style="max-width: 440px;">
        @_error
    </div>
}

@code {
    private string? _error;

    private void HandleLogin() { }

    private void HandleError(string error)
    {
        _error = error;
        StateHasChanged();
    }
}
